---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup-options, echo=FALSE}
knitr::opts_chunk$set(
  collapse = FALSE,
  comment = "#>",
  fig.width = 7,
  fig.height = 6,
  warning = FALSE,
  message = FALSE
)
options(dplyr.width = 140)
options(width = 100)
```

# gutenbergr <a href="https://docs.ropensci.org/gutenbergr/"><img src="man/figures/logo.png" align="right" height="160" alt="gutenbergr website" /></a>

<!-- badges: start -->
[![CRAN version](https://www.r-pkg.org/badges/version/gutenbergr)](https://CRAN.R-project.org/package=gutenbergr)
[![CRAN checks](https://badges.cranchecks.info/summary/gutenbergr.svg?label=CRAN%20Status)](https://cran.r-project.org/web/checks/check_results_gutenbergr.html)
[![rOpenSci peer-review](https://badges.ropensci.org/41_status.svg)](https://github.com/ropensci/software-review/issues/41)
[![Project Status: Active](https://www.repostatus.org/badges/latest/active.svg)](https://www.repostatus.org/#active)
[![R-CMD-check](https://github.com/ropensci/gutenbergr/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/ropensci/gutenbergr/actions/workflows/R-CMD-check.yaml)
[![Integration Tests](https://github.com/ropensci/gutenbergr/actions/workflows/integration-tests.yaml/badge.svg)](https://github.com/ropensci/gutenbergr/actions/workflows/integration-tests.yaml)
[![Codecov test coverage](https://codecov.io/gh/ropensci/gutenbergr/graph/badge.svg)](https://app.codecov.io/gh/ropensci/gutenbergr)
[![Monthly Downloads](https://cranlogs.r-pkg.org/badges/gutenbergr)](https://CRAN.R-project.org/package=gutenbergr)
[![Total Downloads](https://cranlogs.r-pkg.org/badges/grand-total/gutenbergr)](https://CRAN.R-project.org/package=gutenbergr)
<!-- badges: end -->

Search, download, and process public domain texts from the [Project Gutenberg](https://www.gutenberg.org/) collection.

## Installation

::: .pkgdown-release
Install the released version from [CRAN](https://cran.r-project.org/):

```{r install-cran, eval=FALSE}
install.packages("gutenbergr")
```

:::

::: .pkgdown-devel
Install the development version from [GitHub](https://github.com/):

```{r install-dev, eval=FALSE}
# install.packages("pak")
pak::pak("ropensci/gutenbergr")
```

:::

## Quick Start

Load the package:
```{r load-packages}
library(gutenbergr)
library(dplyr)
```

We'll get and set our Project Gutenberg mirror:
```{r get-mirror}
gutenberg_get_mirror()
```

Search through the metadata to find a book:
```{r find-book}
gutenberg_works(title == "Persuasion")
```

_Persuasion_'s `gutenberg_id` is 105. We'll use it to download it. We’ll set our cache option to `"persistent"` so that we don’t have to re-download it later.
```{r download-single, eval=FALSE}
options(gutenbergr_cache_type = "persistent")
persuasion <- gutenberg_download(105)
```

```{r download-single-sample, echo=FALSE}
# For README building, use sample data
persuasion <- gutenbergr::sample_books |>
  filter(gutenberg_id == 105) |>
  select(gutenberg_id, text)
```

```{r show-book}
persuasion
```

Multiple works can be downloaded at once. We'll add `title` data from the metadata.
```{r download-multiple, eval=FALSE}
books <- gutenberg_download(c(105, 161), meta_fields = "title")
```

```{r download-multiple-sample, echo=FALSE}
# For README building, use sample data
books <- gutenbergr::sample_books |>
  select(gutenberg_id, text, title)
```

```{r show-books}
books |> count(title)
```

## Vignettes

See the following vignettes for more advanced usage of gutenbergr.

* [Getting Started with gutenbergr](https://docs.ropensci.org/gutenbergr/articles/intro.html) - explore metadata and download books
* [Text Mining with gutenbergr and tidytext](https://docs.ropensci.org/gutenbergr/articles/text-mining.html) - complete analysis workflow with [tidytext](https://github.com/juliasilge/tidytext)

## FAQ

### How were the metadata files generated?

See the [`data-raw`](https://github.com/ropensci/gutenbergr/tree/master/data-raw) directory for scripts. Metadata was generated from [the Project Gutenberg catalog](https://www.gutenberg.org/ebooks/offline_catalogs.html) on **`r format(attr(gutenberg_metadata, "date_updated"), '%d %B %Y')`**.

### Do you respect robot access rules?

Yes! The package follows [Project Gutenberg's rules](https://www.gutenberg.org/policy/robot_access.html):

* Retrieves books directly from mirrors using the authorized link format
* Prioritizes `.zip` files to minimize bandwidth
* Supports session and persistent caching
* This package is designed for downloading individual works or small collections, not the entire corpus. For bulk downloads, [set up a mirror](https://www.gutenberg.org/policy/robot_access.html).

See their [Terms of Use](https://www.gutenberg.org/policy/terms_of_use.html) for details.

## Contributing

See [`CONTRIBUTING.md`](https://docs.ropensci.org/gutenbergr/CONTRIBUTING.html).

Note that this package is released with a [Contributor Code of Conduct](https://ropensci.org/code-of-conduct/). By contributing to this project, you agree to abide by its terms.

[![ropensci\_footer](https://ropensci.org/public_images/github_footer.png)](https://ropensci.org/)
